(this.webpackJsonpbeatit=this.webpackJsonpbeatit||[]).push([[0],{35:function(e,t,c){},36:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c(0),r=c.n(a),i=c(22),o=c.n(i),s=c(2),l=c(7),u=c(20),d=c(15),b=c(9),g=c.n(b),j=c(14),m=function(e){var t=e.pad,c=e.activeTrackIds,r=e.manageQueue,i=e.isPlaying,o=e.toggleIsPlaying,s=e.recSettings,l=e.handleRec,u=e.onRecPlayback,d=Object(a.useRef)(),b=c&&c.some((function(e){return e===t._id}));Object(a.useEffect)((function(){d.current=new Audio(t.fileUrl)}),[]),Object(a.useEffect)((function(){Object(j.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i||!b){e.next=5;break}return d.current.currentTime=0,e.next=4,d.current.play();case 4:setTimeout(Object(j.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(!0),m(),s.recIsOn&&l();case 3:case"end":return e.stop()}}),e)}))),5);case 5:case"end":return e.stop()}}),e)})))()}));var m=function(){setTimeout((function(){s.playbackMode&&u(),setTimeout((function(){return o(!1)}),5)}),1e3*d.current.duration)},f=function(){var e=Object(j.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b&&(d.current.pause(),d.current.currentTime=0,o(!1)),r(t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)("article",{className:"pad-preview ".concat(b?"active":""),children:Object(n.jsx)("button",{onClick:f,style:{backgroundColor:t.bgc},children:Object(n.jsx)("span",{children:t.title})})})},f=function(e){var t=e.pads,c=e.activeTrackIds,a=e.manageQueue,r=e.isPlaying,i=e.toggleIsPlaying,o=e.recSettings,s=e.handleRec,l=e.onRecPlayback;return Object(n.jsx)("section",{className:"pad-list main-layout",children:t.map((function(e){return Object(n.jsx)(m,{pad:e,activeTrackIds:c,manageQueue:a,isPlaying:r,toggleIsPlaying:i,recSettings:o,handleRec:s,onRecPlayback:l},e._id)}))})},p={query:function(){var e="".concat("/beatit","/assets/sounds/");return[{_id:"p101",title:"Future Funk Beats 25",fileUrl:"".concat(e,"120_future_funk_beats_25.mp3"),bgc:"#2da254"},{_id:"p102",title:"Stutter Breakbeats",fileUrl:"".concat(e,"120_stutter_breakbeats_16.mp3"),bgc:"#ca9d2a"},{_id:"p103",title:"Bass Warwick",fileUrl:"".concat(e,"Bass Warwick heavy funk groove on E 120 BPM.mp3"),bgc:"#c32e2e"},{_id:"p104",title:"Electric Guitar",fileUrl:"".concat(e,"electric guitar coutry slide 120bpm - B.mp3"),bgc:"#2d69a2"},{_id:"p105",title:"Stompy Slosh",fileUrl:"".concat(e,"FUD_120_StompySlosh.mp3"),bgc:"#832da2"},{_id:"p106",title:"Tanggu",fileUrl:"".concat(e,"GrooveB_120bpm_Tanggu.mp3"),bgc:"#a9bb32"},{_id:"p107",title:"Maze Politics",fileUrl:"".concat(e,"MazePolitics_120_Perc.mp3"),bgc:"#2d9fa2"},{_id:"p108",title:"PAS GROOVE",fileUrl:"".concat(e,"PAS3GROOVE1.03B.mp3"),bgc:"#509de6"},{_id:"p109",title:"Silent Star",fileUrl:"".concat(e,"SilentStar_120_Em_OrganSynth.mp3"),bgc:"#a22d7b"}]}};var h={delay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500;return new Promise((function(t){setTimeout(t,e)}))},getRandomInt:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)},makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=c.charAt(Math.floor(Math.random()*c.length));return t},saveToStorage:function(e,t){var c=JSON.stringify(t);localStorage.setItem(e,c)},loadFromStorage:function(e){var t=localStorage.getItem(e);return JSON.parse(t)},removeFromStorage:function(e){localStorage.removeItem(e)}};var O=function(){var e=p.query(),t="REC",c=8.045688,r="".concat("/beatit","/assets/imgs/"),i=h.loadFromStorage(t),o=Object(a.useState)([]),s=Object(d.a)(o,2),b=s[0],g=s[1],j=Object(a.useState)(!1),m=Object(d.a)(j,2),O=m[0],v=m[1],x=Object(a.useState)({recIsOn:!1,playbackMode:!1,iteration:0,recording:i||[]}),k=Object(d.a)(x,2),y=k[0],S=k[1],_=function(){if(O)return window.location.reload();S(Object(l.a)(Object(l.a)({},y),{},{playbackMode:y.iteration!==y.recording.length,iteration:y.iteration>=y.recording.length?0:y.iteration+1})),g(y.recording[y.iteration]),setTimeout((function(){return v(!0)}),5)};return console.log(y.iteration),Object(n.jsxs)("section",{className:"home-page",children:[Object(n.jsx)(f,{pads:e,activeTrackIds:b,manageQueue:function(e){b&&b.includes(e._id)?g(b.filter((function(t){return t!==e._id}))):g([].concat(Object(u.a)(b),[e._id]))},isPlaying:O,toggleIsPlaying:v,recSettings:y,handleRec:function(){S(Object(l.a)(Object(l.a)({},y),{},{iteration:y.iteration+1,recording:[].concat(Object(u.a)(y.recording),[b])}))},onRecPlayback:_}),y.recIsOn&&Object(n.jsx)("img",{src:"".concat(r,"rec-indication.svg"),alt:"rec-indication"}),Object(n.jsxs)("div",{className:"global-play-container flex",children:[Object(n.jsx)("button",{onClick:_,children:O?Object(n.jsx)("img",{src:"".concat(r,"btn-stop.svg"),alt:"stop"}):Object(n.jsx)("img",{src:"".concat(r,"btn-play.svg"),alt:"play"})}),Object(n.jsx)("button",{className:y.playbackMode?"disabled":"",onClick:!y.playbackMode&&function(){S(Object(l.a)(Object(l.a)({},y),{},{recIsOn:!y.recIsOn,iteration:0})),h.saveToStorage(t,y.recording)},children:Object(n.jsx)("img",{src:"".concat(r,"btn-rec.svg"),alt:"rec"})}),Object(n.jsxs)("div",{className:"play-time-status flex a-center ".concat(O?"active":""),children:[Object(n.jsx)("span",{style:{animationDuration:"".concat(c*y.recording.length,"s"),animationDelay:"".concat(-8.045688*(y.iteration-1),"s")}}),y.recording.length&&!y.recIsOn?Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)("label",{className:"muted ".concat(y.playbackMode?"playback-mode":""),children:y.playbackMode?"PLAYING RECORDING":"* Recording available"}),Object(n.jsx)("button",{onClick:function(){h.removeFromStorage(t),S(Object(l.a)(Object(l.a)({},y),{},{recIsOn:!1,playbackMode:!1,iteration:0,recording:[]}))},children:Object(n.jsx)("img",{src:"".concat(r,"btn-clear.svg"),alt:"clear"})})]}):null]})]})]})},v=c(10),x=function(){return Object(n.jsx)("header",{className:"app-header",children:Object(n.jsxs)("section",{className:"main-layout flex j-between a-center",children:[Object(n.jsxs)("div",{className:"logo flex a-center",children:[Object(n.jsx)("img",{src:"".concat("/beatit","/favicon.png"),alt:""}),Object(n.jsx)(v.b,{to:"/",children:"BEAT IT"})]}),Object(n.jsx)("nav",{children:Object(n.jsx)("a",{href:"https://github.com/tomleb3/beatit",children:Object(n.jsx)("svg",{stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"social-link",height:"2em",width:"2em",xmlns:"http://www.w3.org/2000/svg",children:Object(n.jsx)("path",{d:"M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35\r 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65\r 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44\r 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"})})})})]})})};function k(){return Object(n.jsxs)("main",{className:"App",children:[Object(n.jsx)(x,{}),Object(n.jsx)(s.c,{children:Object(n.jsx)(s.a,{path:"/",component:O})})]})}c(35),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var y=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,37)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;c(e),n(e),a(e),r(e),i(e)}))};o.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(v.a,{children:Object(n.jsx)(k,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),y()}},[[36,1,2]]]);
//# sourceMappingURL=main.96e6195c.chunk.js.map